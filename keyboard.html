<BASE HREF="http://www.ibbnet.nl/~anne/keyboard.html"><table border=1 width=100%><tr><td><table border=1 bgcolor=#ffffff cellpadding=10 cellspacing=0 width=100% color=#ffffff><tr><td><font face=arial,sans-serif color=black><font size=+1><b>This is likely not the most recent version.  Click here for the <A HREF="http://www.ibbnet.nl/~anne/keyboard.html"><font color=blue>current page</font></a> without highlighting.</b></font><br>This is <b><font color=#0039b6>G</font><font color=#c41200>o</font><font color=#f3c518>o</font><font color=#0039b6>g</font><font color=#30a72f>l</font><font color=#c41200>e</font></b>'s <a href="http://www.google.com/help.html#K">cache</a> of <A HREF="http://www.ibbnet.nl/~anne/keyboard.html"><font color=blue>www.ibbnet.nl/~anne/keyboard.html</font></a>.<br>
To show your matches, we have used the snapshot of this page that we took as we crawled the web.<br></font><br><center><font size=-1 color=black><i>Google is not affiliated with the authors of cached pages or their content.</i></font></center></td></tr>
<tr><td>
<table border=0 cellpadding=0 cellspacing=0><tr><td><font face=arial,sans-serif color=black>These search terms have been highlighted:&nbsp;</font></td><td bgcolor=#ffff66><B><font face=arial,sans-serif color=black>keyboard&nbsp;</font></B></td><td bgcolor=#ffff66><B><font face=arial,sans-serif color=black>html&nbsp;</font></B></td></tr></table>
</td></tr></table></td></tr></table><hr>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<base href="http://www.ibbnet.org/~anne/keyboard/">
<title>BackSpace and Delete Configuration for Linux (VT, xterm,
bash, tcsh, netscape and more)</title>
<meta name="Author" content="Anne Baretta">
<meta name="DESCRIPTION" content=
"Are you a Linux-user and tired of the misbehaviour of your backspace and delete keys? Work through this document to fix it once and for all.">
<meta name="KEYWORDS" content=
"Linux, backspace, delete, keyboard, configuration, keyboard-configuration, HOWTO, home, end, BackSpace, Delete, Home, End, xterm, VT, less, pico, joe, nedit, netscape, emacs, bash, tcsh">
<style type="text/css">
 div.c6 {font-size: 119%; text-align: center}
 address.c5 {font-size: 80%}
 div.c4 {font-weight: bold; text-align: center}
 div.c3 {text-align: center}
 p.c2 {font-size: 80%}
 div.c1 {font-size: 119%; font-style: italic; font-weight: bold; text-align: center}
</style>
</head>
<body>
<div class="c3">
<h1>Consistent BackSpace and Delete Configuration</h1>

<!--<center><font size=+1><b><i>adjusting erratic/antique/historical keyboard
behavior</i></b></font></center>-->
<div class="c1">The Linux Hall of Shame</div>

<p class="c2"><a href="http://www.ibbnet.org/~anne/keyboard.html">
http://www.ibbnet.org/~anne/<B style="color:black;background-color:#ffff66">keyboard</B>.<B style="color:black;background-color:#ffff66">html</B></a><br>
version 0.6 

<script language="LiveScript">

<!---//hide script from old browsers
    document.write( "<br>Last updated "+ document.lastModified );
//end hiding contents --->

</script>
</p>
</div>
<p>
<hr >
<div class="c6">Please update your bookmarks to <a href="http://www.ibbnet.org/~anne/keyboard.html">
http://www.ibbnet.<b>org</b>/~anne/<B style="color:black;background-color:#ffff66">keyboard</B>.<B style="color:black;background-color:#ffff66">html</B></a>, instead of ibbnet.<b>nl</b></div>
<hr>
<p>
<div class="c3"><u>Main Page</u>|<a href="keyboardprev.html">The
Alternative Way</a> |<a href=
"troubleshooting.html">Troubleshooting</a></div>

<p>
<div class="c3">
<table>
<tr>
<th colspan="9">
<h3>Index</h3>
</th>
</tr>

<tr>
<td colspan="5">
<div class="c3"><a href="keyboard.html#intro">
Introduction</a></div>
</td>
<td colspan="4">
<div class="c3"><a href="keyboard.html#term"> Terminology</a></div>
</td>
</tr>

<tr>
<td colspan="3">
<div class="c3"><a href="keyboard.html#prob"> The Problem</a></div>
</td>
<td colspan="3">
<div class="c3"><a href="keyboard.html#sol">
Solution(work-arounds)</a></div>
</td>
<td colspan="3">
<div class="c3"><a href="keyboard.html#overview">
Overview</a></div>
</td>
</tr>

<tr>
<td colspan="9">
<div class="c3"><em>Configuration of environments...</em></div>
</td>
</tr>

<tr>
<td colspan="2">
<div class="c3"><a href="keyboard.html#terminfo">
terminfo</a></div>
</td>
<td colspan="2">
<div class="c3"><a href="keyboard.html#Xterm"> Xterm</a></div>
</td>
<td colspan="1">
<div class="c3"><a href="keyboard.html#X"> X</a></div>
</td>
<td colspan="2">
<div class="c3"><a href="keyboard.html#Bash"> Bash</a></div>
</td>
<td colspan="2">
<div class="c3"><a href="keyboard.html#Tcsh"> Tcsh</a></div>
</td>
</tr>

<tr>
<td colspan="9">
<div class="c3"><em>... and applications</em></div>
</td>
</tr>

<tr>
<td><a href="keyboard.html#athena">Athena-apps</a></td>
<td><a href="keyboard.html#emacs">Emacs</a></td>
<td><a href="keyboard.html#joe">Joe</a></td>
<td><a href="keyboard.html#kde">KDE</a></td>
<td><a href="keyboard.html#less">Less</a></td>
<td><a href="keyboard.html#nedit">Nedit</a></td>
<td><a href="keyboard.html#netscape">Netscape</a></td>
<td><a href="keyboard.html#pico">Pico and Pine</a></td>
<td><a href="keyboard.html#vim">Vim</a></td>
<td><a href="keyboard.html#mutt">Mutt</a></td>
<td><a href="keyboard.html#other">Telnet</a></td>
</tr>
</table>
</div>

<div class="c3">
<h2><a name="intro">Introduction</a></h2>
</div>

Many people using <a href="http://www.linux.org">Linux</a> do not
like the default behaviour of the BackSpace and Delete keys. The
goal of this document is to make [&lt;---] (i.e. the backspace-key
on your <B style="color:black;background-color:#ffff66">keyboard</B>) to erase to the left, and make [Delete](i.e. the
delete-key) erase under the cursor. It seems only <a href= 
"http://www.debian.org">Debian</a> and <a href=
"http://www.suse.com">SuSE</a> have dealt with this issue. The
problem is that this issue is only adequately dealt with at the
distribution level, making sure all apps are compiled with the
right keybindings, conforming all terminfo entries to one method,
etc. This document will get you a long way, but it is a shame that
users have to go through this thousands of times individually,
instead of a couple developers fixing it for all. 

<p>The keymapping problem can be traced back to the time when
computers used punched tapes. The only way to correct a wrongly
punched character was to punch additional bits in the tape.
Characters with all the bits punched were treated as deleted
characters. See 'man ascii' for a list of the ASCII characterset,
you'll see that DEL, (octal 177, decimal 127 and hexadecimal 7F) is
the one with all the bits punched in (the ASCII code with the
highest value). To be able to overwrite a character it is necessary
to undo the feed between the characters first. For this the ASCII
BS (octal 010, decimal 8, hexadecimal 08) was used. So to erase the
last-typed character, you would have to press first BS and then
DEL. In newer computers either BS or DEL was chosen to do it in one
press.</p>

<p>The question to use BS or DEL was (and is...) just a matter of
choice, just as different operating systems chose different ways to
represent newlines, which was done by first issuing a carriage
return (CR) and then a line-feed (LF). UNIX chose ASCII LF
(hexadecimal 0A) to do both at the same time, Macintosh chose CR
and MS-DOS both. Unfortunately, in the BS-DEL case, Linux ended up
with two possibilities.</p>

<p> The essential point in this issue is to go for one way
consistently. This page describes a way to consistently use DEL to
erase the previous character, the page called <a href= 
"keyboardprev.html">The Alternative Way</a> describes a way to
consistently use BS. On the latter page there are some tips which
may be useful regardless of what approach you take.</p>

<p>At this point the best way to fix the keys on your machine is to
install <a href="http://www.debian.org">Debian</a> from version 2
(Hamm) and up, or <a href="http://www.suse.com">SuSE</a>.</p>

<p> If you miss an application on this page, it's either because
the keys are ok in the application ("If it ain't broken, don't fix
it"), or because I don't know about it. In either case, don't
hesitate to mail me about it.</p>

<div class="c3">
<h2><a name="term">Terminology</a></h2>
</div>

Throughout this document, [&lt;---] and [Delete] are used to denote
the physical keys on the <B style="color:black;background-color:#ffff66">keyboard</B>, the things you actually press to
erase characters. There are a few things to keep in mind: ASCII
values can be represented in several equivalent ways. This means
that ASCII BS is equivalent to 010 in octal, 8 in decimal and 08 in
hexadecimal notation. To show that a number is in hexadecimal
notation '0x' is put in front of it. Finally it should be noted
that BS and DEL are known to applications by their corresponding
control sequences. To sum it up: 

<div class="c3">
<table>
<tr>
<th>Note:</th>
</tr>

<tr>
<td><strong>ASCII BS == 0x08 == ^H</strong></td>
</tr>

<tr>
<td><strong>ASCII DEL == 0x7f == 0177 == ^?</strong></td>
</tr>
</table>
</div>

<hr>
<div class="c3">
<h2><a name="prob">The problem:</a></h2>
</div>

The reason the keys (generally) do not work out-of-the-box is
partly lack of configuration (as you will see later, simply
creating <code>.inputrc/.cshrc</code> already helps a lot) and a
more difficult issue which I will try to describe below. 

<p> The linux console emulates a vt220 terminal which has the
following key-mapping:</p>

<pre>
<a name="vt220">Linux console/VT220</a>
Key            KeySymName       Console characters
  --------------------------------------------------
  Ctrl+H   ---&gt;  Control_H  ---&gt;  ASCII  BS (0x08)
  [&lt;---]   ---&gt;  Backspace  ---&gt;  ASCII DEL (0x7f)
  [Delete] ---&gt;  Delete     ---&gt;  "\e[3~"
</pre>

Note 1: BS (0x08) is equivalent to ^H, which is left to be used by
applications (e.g. for help menus in emacs, but it could be
anything). DEL is equivalent to ^?, or 0177 (octal) and 0x7f (hex)
and "\e[3~" will show up in your xterm (using the <a href= 
"keyboard.html#trick">^v-trick</a>) as ^[[3~. Xterms on the other
hand, emulate the vt100 terminal, which didn't have a [Delete]. It
did have a [&lt;---] which generated ASCII BS (but it was in an
awkward position and did not serve as rubout). 

<pre>
VT100
--
Key            KeySymName       Console characters
  --------------------------------------------------
  Ctrl+H   ---&gt;  Control_H  ---&gt;  ASCII  BS (0x08)
  [&lt;---]   ---&gt;  Backspace  ---&gt;  ASCII DEL (0x7F)
</pre>

Now here's how xterm emulates the VT100 terminal: 

<pre>
<a name="vt100">Xterm's emulation of VT100</a>
Key            KeySymName       Console characters
  --------------------------------------------------
  Ctrl+H   ---&gt;  Control_H  ---&gt;  ASCII  BS (0x08)
  [&lt;---]   ---&gt;  Backspace  ---&gt;  ASCII BS (0x08)
  [Delete] ---&gt;  Delete     ---&gt;  ASCII DEL (0x7F)
</pre>

It may be clear that by default the keys are mapped differently on
the console and in xterm. This would be ok if it weren't for the
fact that while on the console ^H is free to be used by
applications, in an xterm it is not (instead it's mapped to the
[&lt;---] key). Differences between terminal types are generally
dealt with by the terminfo database (see below), mapping terminal
specific strings to the correct key. However, in this case, the ^H
should <strong>not</strong> be mapped. Terminfo is not enough, the
settings of the terminal (xterm) have to be modified such that ^H
is not used. 

<p>In <a href="keyboardprev.html">my previous attempt</a> at
working around the problem, I put most of my effort in trying to
map all keys to suit xterm's vt100 emulation. However, I now
propose another way to deal with the problem. This basically means
getting xterm to work with the consoles' default settings:
[&lt;---] will do ASCII DEL (0x7F, or ^?), and [Delete] will do
"\e[3~". This way ^H is not used for any terminal specific
functions, it can be used by applications.</p>

<div class="c3">
<h2><a name="sol">Solution (work-arounds)</a></h2>
</div>

There is no clear solution, but there are some pretty good
work-arounds. What is needed is to tell <a href=
"keyboard.html#Xterm">xterm</a> how to handle the keys, and then to
tell other applications about it (i.e. how xterm handles the keys).
The terminfo database contains descriptions of how all kinds of
terminals handle (terminal specific) keys. Applications look at the
TERM variable, and then search the corresponding database for the
value of a certain key, e.g. the left-arrow key, and find the
string that corresponds to it. This means that the strings in the
database had better correspond to your current xterm settings. This
involves modifying xterm's terminfo entry. 

<p> When you change the keymapping on your own system, you may have
problems when accessing other systems. Luckily, this can be
worked-around by a script which changes the input it receives to
the output that is expected by the application (telnet, rlogin).
See the <a href="keyboard.html#other">telnet</a> section.</p>

<div class="c3">
<h2><a name="overview">Overview</a></h2>
</div>

This table summarizes the modifications needed in the different
environments, and the tools it is done with: 

<div class="c3">
<table border="1">
<tr>
<td rowspan="2">
<div class="c4">Environment&nbsp;&nbsp;&nbsp;&nbsp;</div>
</td>
<td colspan="2">
<div class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Configuration
files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>
</td>
<td rowspan="2">
<div class="c4"> Configuration&nbsp;</div>
</td>
</tr>

<tr>
<td>
<div class="c4">user&nbsp;&nbsp;&nbsp;</div>
</td>
<td>
<div class="c4">
&nbsp;systemwide&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>
</td>
</tr>

<tr>
<td><a href="keyboard.html#terminfo">
Terminfo</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><code>&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code></td>
<td><code>
&nbsp;&nbsp;&nbsp;terminfo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code></td>
<td><code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;infocmp/tic&nbsp;&nbsp;&nbsp;</code></td>
</tr>

<tr>
<td><a href="keyboard.html#Xterm">Xterm</a>&nbsp;</td>
<td><code>~/.Xdefaults (*)</code></td>
<td><code>&nbsp;/etc/X11/Xresources&nbsp;</code></td>
<td><code>xrdb ~/.Xdefaults&nbsp;(*)</code></td>
</tr>

<tr>
<td><a href="keyboard.html#X">
X</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><code>&nbsp;-&nbsp;&nbsp;</code></td>
<td><code>/etc/X11/xinit/.Xmodmap (**)</code>&nbsp;&nbsp;</td>
<td><code>xmodmap .Xmodmap</code>&nbsp;&nbsp;</td>
</tr>

<tr>
<td><a href="keyboard.html#Bash">
Bash</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><code>~/.inputrc</code>&nbsp;&nbsp;&nbsp;</td>
<td><code>/etc/inputrc&nbsp;&nbsp;&nbsp;</code></td>
<td><code>export INPUTRC=/etc/inputrc</code>&nbsp;&nbsp;</td>
</tr>

<tr>
<td><a href="keyboard.html#Tcsh">
Tcsh</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><code>~/.cshrc</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><code>
/etc/cshrc</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;&nbsp;&nbsp;<code>bindkey
(shellcommand)</code>&nbsp;&nbsp;</td>
</tr>
</table>
</div>

* or <code>.Xresources</code><br>
** <code>/etc/X11/XF86Config</code> also affects the <B style="color:black;background-color:#ffff66">keyboard</B>
settings under X 

<hr>
<div class="c3">
<h2><a name="terminfo">Terminfo</a></h2>
</div>

This is often a problem. When you find that the keys are fine in
e.g. vi on the console, but not in an xterm (or vice versa, or
both) it means that your xterm-settings do not correspond to the
settings listed in the terminfo database. I am not really
comfortable with telling you to fiddle with terminfo, please be
careful, make backups! If you run the tic command on the modified
de-compiled terminfo entry as root, your system's terminfo database
will be modified automagically. Put the original file in a save
place so you can run tic on it and restore the original state. Read
the manpage. First try it as non-privileged user. You can start
with testing a modified xterminfo file (see below) as explained,
however, since these are likely to differ from your system's entry
at other points, it's probably better to modify your own instead.
At any rate, first find out whether the terminfo entry for xterm is
in accordance with your xterm settings: 

<pre>
<code>infocmp | grep kbs</code>
</pre>

should return a line which includes <code>kbs=\177</code>. This
means DEL (or ^?) is mapped to the backspace key, which is what we
want. 

<pre>
<code>infocmp | grep kdch1</code>
</pre>

should return a line with <code>kdch1=\E[3~</code>. This means that
\E[3~ is mapped to the delete key. Often you will find kbs=^H
and/or kdch1=\177, or there will be no kdch1 at all. You can either
edit the terminfo entry as described on the <a href= 
"troubleshooting.html#termcap">Troubleshooting-page</a> (simply
setting or adding <code>kdch1=\E[3~</code> and <code>
kbs=\177</code>, but make a backup first!) or you could download
(click shift or right) a modified <a href="debian.xterm">debian
xterminfo</a> or <a href="xterm.redhat">redhat xterminfo</a> and
test it. Put the file in <code>~/.terminfo/x/xterm</code> (for
testing purposes) and do for bash: 

<pre>
<code>export TERMINFO=~/.terminfo</code>
</pre>

and/or for tcsh: 

<pre>
<code>setenv TERMINFO ~/.terminfo</code>
</pre>

Make sure that the TERM variable is set to xterm: 

<pre>
<code>echo $TERM</code>
</pre>

should return "xterm". If it works as intended (do 'toe' to check
whether the terminfo dir you specified is indeed used, toe will
return a list of available terminfo types, only xterm in this
case), you can run tic as root, which will copy the file to 

<pre>
<code>/etc/terminfo/x/xterm</code>
</pre>

(<a href="http://www.debian.org">debian</a>) or 

<pre>
<code>/usr/lib/terminfo/x/xterm</code>
</pre>

(<a href="http://www.redhat.com">redhat</a>, <a href= 
"http://www.cdrom.com/">slackware</a>). Make backups first, and
test it before you replace any files! 

<hr>
<div class="c3">
<h2><a name="Xterm">Xterm</a></h2>
</div>

The xterm (and friends) only needs little configuration. In the
<code>/etc/X11/Xresources</code> or <code>~/.Xdefaults</code> (or
wherever it's merged with the other xresources) add the line: 

<pre>
<code>*VT100.Translations: #override \
              &lt;Key&gt;BackSpace: string(0x7F)\n\
              &lt;Key&gt;Delete:    string("\033[3~")\n\
              &lt;Key&gt;Home:      string("\033[1~")\n\
              &lt;Key&gt;End:       string("\033[4~")
*ttyModes: erase ^? 
</code>
</pre>

<p>Rxvt only uses <code>Xresources</code> if it is compiled with
this option. Since rxvt uses readline, to get home and end to work
you will have to edit <code>.inputrc</code>, see the <a href= 
"keyboard.html#Bash">Bash</a> section). <a href= 
"http://www.redhat.com">Redhat</a> users can pick up the SRPM
(source) and compile rxvt themselves with this <a href="feature.h">
feature.h</a>, ensuring the right keybindings.</p>

<p> Putting <code>xterm</code> or <code>nxterm</code> in front of
<code>*vt100.translations</code> makes the settings specific for
xterm or nxterm. Sometimes this does not seem to work properly, in
that case try using both <code>nxterm*VT100.Translations</code> and
<code>xterm*VT100.Translations</code>.</p>

<p><a name="trick">BTW, have I told you that <code>Ctrl-v
&lt;key&gt;</code> will tell you what sequence is sent to the
shell? Try <code>Ctrl-v [Delete]</code>, it should give a <code>
^[[3~</code> in your xterm or console (try it with [ESC] and you'll
find ^[, which corresponds to \e for readline apps, and \033 for
Xresources).</a></p>

<p> 1. The syntax of the <code>Xresources</code> files is very
strict, make sure you don't leave blank spaces after the backslash
on each line. Also watch the newline (<code>\n\</code>) sequences,
there shouldn't be one at the last line of an entry.<br>
2. The sections are named, if you only use <code>
*VT100.Translations</code> it will work for all xterm and
friends.<br>
3. For info about <code>Xresources</code> and other X related stuff
refer to <a href="X.html"><code>'man X'</code></a>.</p>

<hr>
<div class="c3">
<h2><a name="X">X</a></h2>
</div>

If you use <a href="http://www.XFree86.org">XFree86</a>, make sure
you have enable the XKB extensions in <code>
/etc/X11/XF86Config</code>. It is enable by default, so it should
be okay. Note the different <B style="color:black;background-color:#ffff66">keyboard</B> layout-options. Now XFree86
will translate the console mapping, and everything should work in
X. If you have problems, or want to fiddle with additional
characters and things, create an <code>Xmodmap</code>. Also if you
want the <B style="color:black;background-color:#ffff66">keyboard</B> to generate special characters in X, <code>
xmodmap</code> can also be used to configure the function-keys.
This is adequately described in the manual page (<code>'man
xmodmap'</code>. Make sure that the following lines are included in
your <code>Xmodmap</code>: 

<p> <code>keycode 22 = BackSpace</code><br>
 <code>keycode 107 = Delete</code></p>

<p> Note that the keycodes in X are <strong>not</strong> the same
as in a VT. Use <code>showkey</code> to see the keycodes generated
by the <B style="color:black;background-color:#ffff66">keyboard</B> in a VT, and <code>xev</code> in X. There is an
excellent graphical front end for X-<B style="color:black;background-color:#ffff66">keyboard</B> configuration: <code>
xkeycaps</code>. Refer to the <a href="keyboard.html#netscape">
Netscape section</a>.</p>

<p> Another way of generating special characters in X (without
using <code>xmodmap</code>) is by defining a Compose-key (for use
as a "dead key") in <code>XF86Config</code> in the <B style="color:black;background-color:#ffff66">Keyboard</B>
section:</p>

<pre>
<code>  RightCtl        Compose
</code>
</pre>

Now you have a compose-key with the same properties as the one
described in the <a href="keyboardprev#VT">VT</a> section. Remember
to set the environment variable <code>LC_CTYPE=iso-8859-1</code>
(see <a href="keyboardprev.html#VTopt">VT optional...</a>). Consult
<a href="XF86Config.man.html"><code>'man XF86Config'</code></a> if
you want to know more. <strong>Note</strong>: this doesn't seem
work rxvt.<br>
 Alternatively, owners of a windows <B style="color:black;background-color:#ffff66">keyboard</B> (one with extra
buttons, it need not be a M$ natural <B style="color:black;background-color:#ffff66">keyboard</B>) can enable the
<code>XKEYBOARD</code> extension (enabled per default) in <code>
XF86Config</code> and uncomment the line (follow the instructions
in the file): 

<pre>
<code>  XkbModel    "microsoft" 
</code>
</pre>

Now you can use the button with the windows flag on it to produce a
great number of exotic characters, just press it in combination
with e.g. a, producing &aacute; (a clear disadvantage is that there
is no logic in the location of the special characters at all...). 

<p> Yet another way to use "dead keys" in X is by installing a
modified version of libX11 which includes support for dead keys
(transparent for all apps). First, get the modified version of
libX11 (make sure you get the right version, if you use glibc
replace both libX11, ELF-libc5 and ELF-libc6). Now, deactivate the
XKB extension of XFree86 (edit <code>XF86Config</code> and run
xmodmap on a Xmodmap file with dead keys like dead_acute,
dead_grave, dead_cedilla, dead_ogonek and a Multi_keys one too.</p>

<p> A special case is if you use xdm, you need to deactivate XKB
from the <code>/etc/X11/xdm/Xservers</code> file, passing a -kb
parameter to the server like this:</p>

<pre>
<code>:0 local /usr/X11R6/bin/X -kb
</code>
</pre>

then in <code>/etc/X11/xdm/Xsetup_0</code> file add a line to load
the Xmodmap, like this: 

<pre>
<code>if [ -r /etc/X11/xinit/.Xmodmap ]; then
        /usr/X11R6/bin/xmodmap /etc/X11/xinit/.Xmodmap
fi
</code>
</pre>

Now chars accesible by AltGr, dead keys or compose are usable in
xdm too. 

<h4>More Composing Talk</h4>

A problem common to all compose schemes is that while some
composing systems make more sense than others, none of them make
all of the iso_8859_1 characters readily accessible, simply because
it is impossible to remember the combinations for all characters.
So instead of, or in addition to getting special libraries, it is
often desirable to simply have a list of characters you can copy
from, a poor man's iso_8859_1 table so to speak. Just grab you
favorite editor, open a file called iso_8859_1 (or any other name,
but check the name and path) and put in all iso_8859_1 characters.
Wait, here they are (you may want to create a different order): 

<pre>
<code>&iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &shy; &reg; &macr; &deg; &plusmn; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil;
&Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc;
&iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; 
</code>
</pre>

Now you need a way to display them (millions of options here, I bet
you can do all kinds of crazy things with fonts, colors, pixmaps,
borders...). The script assumes the file with the characters is in
<code>/usr/local/lib</code>. 

<pre>
<code> 

#!/bin/bash 
export LESSCHARSET=latin1 
exec xterm -T Iso_8859_1-TABLE -geometry 77x4 +sb -bg SteelBlue -fg white \
-fn lucidasanstypewriter-bold-12 -e less /usr/local/lib/iso_8859_1

</code>
</pre>

Refer to the manual page of iso_8859_1. If you do 'man iso_8859_1'
but you don't see any special characters, edit <code>
/etc/man.config</code>, and change the following line: 

<pre>
<code>NROFF         /usr/bin/groff -Tascii -mandoc
</code>
</pre>

to: 

<pre>
<code>NROFF         /usr/bin/groff -Tlatin1 -mandoc
</code>
</pre>

Now try 'man -c iso_8859_1' (the -c option is to make sure man does
not use an old cat file). 

<hr>
<div class="c3">
<h2><a name="Bash">Bash</a></h2>
</div>

<p> Create a file, <code>/etc/inputrc</code> for system wide use or
<code>~/.inputrc</code> for personal use. Actually, this is the
readline initialization file, readline is a library that some
programs (bash, kvt) use to read input (try <code>bind -v</code> to
see a list of readline key and function bindings). Cut and paste
the following in the file to make the Delete key delete characters
under the cursor, and make Home and End work as well:</p>

<pre>
<code>"\e[3~": delete-char
# this is actually equivalent to "\C-?": delete-char
# VT
"\e[1~": beginning-of-line
"\e[4~": end-of-line
# kvt
"\e[H":beginning-of-line
"\e[F":end-of-line
# rxvt and konsole (i.e. the KDE-app...)
"\e[7~":beginning-of-line
"\e[8~":end-of-line
</code>
</pre>

If a system-wide <code>/etc/inputrc</code> was created, add the
following line to <code>/etc/profile</code>: 

<pre>
<code>export INPUTRC=/etc/inputrc</code>
</pre>

<p> Make sure that the stty erase character is set to <code>
^?</code>. Type</p>

<pre>
<code>stty -a | grep erase</code>
</pre>

<p>and check if it says</p>

<pre>
<code>erase = ^?;</code>
</pre>

<p>If it is set to something else (e.g. <code>^H</code>) then put
the following line in both <code>.bashrc</code> and in either
<code>.bash_profile</code> or <code>/etc/profile</code>:</p>

<pre>
<code>  if tty --quiet ; then
    stty erase '^?'
  fi
</code>
</pre>

and for xterm and rxvt add this to <code>.Xdefaults</code>: 

<pre>
<code>*ttyModes: erase ^?
</code>            
</pre>

<p> If you create <code>/etc/inputrc</code>, note that Bash will
ignore <code>~/.inputrc</code> (currently this happens in all
distributions except Debian, however, this might change in the
future). As an alternative, you can edit <code>~/.inputrc</code>,
and copy this to <code>/etc/skel/</code>, so it's in the home
directories of all new users.<br>
 Push the key-combination '<code>Ctrl-x-r</code>' (push the
control-key, the x-key. release it, push the r-key, release it, and
then release the control-key) to see if the changes in <code>
inputrc</code> take effect. Or just login again, and it will work. 
<!--<P>Check <A href="keybdextra.html">Keyboard Tips &amp; Tricks</A> for
<CODE>bash</CODE> tips.--></p>

<p>You can also change the keybindings on the fly with the <code>
bind</code> command, e.g:</p>

<pre>
[localhost]&gt; bind "\C-?": backward-delete-char
</pre>

This is useful to test different keybindings, if they work you can
put them in <code>~/.inputrc</code>. Read all about it in the
readline manpage. 

<p> People using keymaps with e.g. Scandinavian characters who
would like bash to display these characters (&oslash;l;-) have to
add the following lines in <code>.inputrc</code>:<br>
 <code>set convert-meta off</code><br>
<code>set output-meta on</code><br>
 <code>set input-meta on</code><br>
<br>
For more info, check the <a href="Danish-HOWTO.gz"><code>
Danish-HOWTO</code></a>.</p>

<hr>
<div class="c3">
<h2><a name="Tcsh">Tcsh</a></h2>
</div>

If you use the tcsh shell, put the following lines in your <code>
/etc/cshrc</code> or your personal <code>~/.cshrc file:</code> 

<pre>
<code>#.cshrc
 if ($term == "xterm" || $term == "vt100" \
            || $term == "vt102" || $term !~ "con*") then
          # bind keypad keys for console, vt100, vt102, xterm
          bindkey "\e[1~" beginning-of-line  # Home
          bindkey "\e[7~" beginning-of-line  # Home rxvt
          bindkey "\e[2~" overwrite-mode     # Ins
          bindkey "\e[3~" delete-char        # Delete
          bindkey "\e[4~" end-of-line        # End
          bindkey "\e[8~" end-of-line        # End rxvt
      endif
 </code>
</pre>

To see whether it works or not, type: 

<p><code>[localhost]&gt; source .cshrc</code></p>

<hr>
<hr>
<div class="c3">
<h2><a name="athena">Athena Applications</a></h2>
</div>

For programs using the Athena widgets (xpaint, xbmbrowser, xman,
xmh, xedit, pixmap, bitmap, editres...) put the following in <code>
.Xdefaults</code> to get Delete to work: 

<pre>
<code>*Text.translations:    #override \ 
    ~Shift ~Meta &lt;Key&gt;Delete: delete-next-character()
</code>
</pre>

<div class="c3">
<h2><a name="emacs">Emacs</a></h2>
</div>

In emacs, [&lt;---] and [Delete] are by default configured to both
erase the character on the left of the cursor. To change this, you
can either edit the file <code>x-win.el</code> in the emacs root
directory, and find the following: 

<pre>
<code>
;; Map certain keypad keys into ASCII characters
;; that people usually expect.
(define-key function-key-map [backspace] [127])
(define-key function-key-map [delete] [127])

</code>
</pre>

and change the last line to 

<pre>
<code>(define-key function-key-map [delete] [deletechar])

</code>
</pre>

Alternatively you can add 

<pre>
<code>(define-key function-key-map [delete] [deletechar])

</code>
</pre>

to your ~/.emacs file. 

On a related note, by default in emacs the HOME key brings you to the beginning
of the buffer (i.e. top of the document). Likewise the END key brings you to
the end of the buffer. Adding the lines

<pre>
<code>
(define-key global-map [home] `beginning-of-line)
(define-key global-map [end] `end-of-line)
</code>
</pre>
 
to your <code>~/.emacs</code> make these keys move you to the beginning and
end of the current line. Note that the M-&lt; and M-&gt; keybindings remain
untouched and can still be used to go to the beginning and end of the buffer.

<div class="c3">
<h2><a name="joe">Joe</a></h2>
</div>

First find the file joerc. It is most likely <code>
/usr/lib/joe/joerc</code>, but sometimes <code>/etc/joerc</code>,
or maybe even <code>/usr/local/lib/joerc</code>. Try <code>'locate
joerc'</code> if you can't find the file. Make a backup for safety,
or copy it to .joerc in your home directory, and change/add the
following lines in the section "Standard JOE user interface" in
joerc: 

<pre>
<code>bol              ^[ [ H          # Standard xterm escape seq.
bol              ^[ [ 1 ~        # Standard VT escape seq.
bol              ^[ [ 7 ~        # rxvt
eol              ^[ [ F          # Standard xterm escape seq.
eol              ^[ [ 4 ~        # Standard VT escape seq.
eol              ^[ [ 8 ~        # rxvt
</code>
</pre>

<strong>Note</strong> that you first have to make sure that Home
and End work in an <a href="keyboard.html#Xterm">xterm</a>. Check
out <a href="joe.html"><code>'man joe'</code></a>. BTW, these
modifications apply to <code>jpicorc</code>, <code>jstarrc</code>
and <code>jmacsrc</code> as well. 

<div class="c3">
<h2><a name="kde">KDE</a></h2>
</div>

<a href="http://www.kde.org">KDE</a> provides a new alternative to
kvt called konsole. To get the home/end keys to work in konsole you
have to put: 

<pre>
 
<code>"\e[H":beginning-of-line
"\e[F":end-of-line
</code>
</pre>

in <code>.inputrc</code>. Additionally, make sure that you have
checked the '<code>BS sends DEL</code>' checkbox (right mouse
click, or through the 'Options' pulldown menu). In kvt, <a href= 
"http://www.kde.org">KDE's</a> home and end can be configured by
editing <code>~/.inputrc</code> (<code>tcsh</code> users too, it
uses readline): 

<pre>
 
<code>"\e[H":beginning-of-line
"\e[F":end-of-line
</code>
</pre>

<div class="c3">
<h2><a name="less">Less</a></h2>
</div>

Less is ok on some systems. If it is not on yours, try the
following. Create a file, <code>/etc/lesskey</code>, for
system-wide use. This will be a <code>lesskey</code> input file.
Put the following lines in the file: 

<pre>
<code>#line-edit
\e[3~          delete
\e[1~          home
\e[4~          end
</code>
</pre>

<br>
 Save the file, and compile it as follows: 

<pre>
<code>[localhost]&gt; lesskey -o /etc/less /etc/lesskey</code>
</pre>

<p>Add the following line to /etc/profile:</p>

<pre>
<code>export LESS="-MM -k/etc/less"</code>
</pre>

<p>Now type:</p>

<p><code>[localhost]&gt; . /etc/profile</code></p>

<p> By fiddling with these settings you should be able to get less
to accept (all of) the holy keycodes, at least, it works on my
computer. For some exciting reading, check <a href="lesskey.html">
<code>'man lesskey'</code></a>. 
<!--For some way more exciting reading, check <A
href="keybdextra.html">Keyboard Tips &amp; Tricks</A> for additional
<CODE>less</CODE> tips.--></p>

<div class="c3">
<h2><a name="nedit">Nedit</a></h2>
</div>

Put the following in <code>~/.Xdefaults</code>: 

<pre>
<code> nedit.remapDeleteKey: False</code>
</pre>

<p> Save the file, and the next time you start <a href= 
"http://www-pat.fnal.gov/nirvana/nedit.html">nedit</a> the Delete
key will do what we want it to: delete under the cursor. Note: you
can also put the line in <code> ~/.nedit</code>, but every time you
save the default settings, the <code>.nedit</code> file will be
overwritten, and you'll have to (n)edit it again.</p>

<p> Note the nedit, as e.g. netscape, is a motif application. This
means that it uses the XKeysymDB, see thet netscape section.</p>

<div class="c3">
<h2><a name="netscape">Netscape</a></h2>
</div>

The keys should be ok, as long as the XKeysymDB is installed in one
of the places where netscape looks (where netscape itself is
installed, or <code>/usr/X11R6/lib/X11/</code>). XKeysymDB is
similar to an xmodmap file, but with a very cryptic and poorly
documented syntax. Luckily, it does do the delete/backspace thing
right, so no sweat. 

<p> If you use xmodmap, you may want to check out the graphical
front end for X-<B style="color:black;background-color:#ffff66">keyboard</B> configuration: <code>xkeycaps</code>. Get
the .rpm at <a href="ftp://ftp.redhat.com/pub/redhat/">RedHat
Powertools</a>, or get the <a href= 
"http://www.debian.org/Packages/stable/x11/xkeycaps.html">
Debian-package</a> (or plain tarball). It's a nice tool. You can
also look for a default Xmodmap file on your system. At any rate,
make sure that the following is in the file:</p>

<p><code>keycode 22 = BackSpace<br>
keycode 107 = Delete</code></p>

<p>alternatively, you can put it in e.g. your .Xclients file, or in
<code>/etc/X11/xdm/Xsetup_0</code>):</p>

<pre>
<code># map the [&lt;---] key to the [BackSpace] keysym.
xmodmap -e "keycode 22 = BackSpace"
# map the [Delete] key to the [Delete] keysym.
xmodmap -e "keycode 107 = Delete"
</code>
</pre>

<div class="c3">
<h2><a name="pico">Pico and Pine</a></h2>
</div>

I found that wile the keys worked in a VT, in xterms only backspace
works. This was caused by the <code>.Xdefaults</code>
modifications. If you use the <code>~/.inputrc</code> to get Delete
to work in xterms (and then pico and pine will be able to use
Delete), however, this creates problems with other apps (e.g. joe)
which cannot be easily solved because joe relies on the <code>
.Xdefaults</code> modifications to get the keys right. Anyway, it
turns out that <a href="http://www.washington.edu/pine/">pine</a>
and pico are simply broken, as the workaround will clearly
demonstrate. Admittedly broken is a relative thing in all this
<B style="color:black;background-color:#ffff66">keyboard</B>-confusion: from the other method's perspective they are
perfectly ok. One thing is for sure, these two apps are exceptions.
Try the following: make an expect script (let's call it picofix): 

<pre>
<code>#!/usr/bin/expect

eval spawn -noecho $argv

interact {
 \177        {send "\008"}
 "\033\[3~"  {send "\004"}
}
</code>
</pre>

Make picofix executable, and start the editor (or pine) with 

<pre>
<code>picofix pico</code>
</pre>

and it will work (then you can make an alias or a wrapper). Thanks
to Philip Hands for this ingenious (and powerful!) workaround. You
can also use an alternate editor. Edit <code>.pinerc</code> and
find the following lines: 

<p><code># Specifies the program invoked by ^_ in the Composer,<br>
# or the "enable-alternate-editor-implicitly" feature.<br>
editor=</code></p>

<p> You can enter the command for any editor here, e.g. <code>
joe</code> or <code>vi</code>.</p>

<p> If you want the editor to be started right away, start <code>
pine</code>, enter <code>SETUP</code> and <code>Config</code> and
select the <code>enable-alternate-editor-implicitly</code> option.
Now the editor of choice will be started automagically when you
start writing a message.</p>

<p> Pico fans may want to try jpico, which is basically joe with
pico keybindings (and all the extra's joe offers). Others my be
even smarter and switch to <a href="http://www.vim.org">vim</a> and
<a href="http://www.mutt.org">mutt</a>. Note that the first can be
taught to do the <code>Ctrl-j</code>-trick, the latter can use pine
keybindings.</p>

<div class="c3">
<h2><a name="vim">Vim</a></h2>
</div>

Vim uses <a href="keyboard.html#terminfo">terminfo</a>, so the keys
should be ok if your terminfo is. However, if it is not, you can
still get the keys to work in vim. Type <code>:help fixdel</code>
in vim and read all about it. 

<div class="c3">
<h2><a name="mutt">Mutt</a></h2>
</div>

Put the following line in <code>~/.muttrc</code>: 

<pre>
bind editor &lt;delete&gt; delete-char
</pre>

This will make [Delete] do its job in <a href=
"http://www.mutt.org">mutt's</a> internal pager. 

<div class="c3">
<h2><a name="other">Telnet</a></h2>
</div>

If you have modified <a href="keyboard.html#terminfo">terminfo</a>
and you are e.g. telnetting to a machine with a default terminfo
(for xterm usually), you can use the following script (let's call
it kbdfix) to change the keysequences you generate to the ones the
program expects: 

<pre>
<code>#!/usr/bin/expect

eval spawn -noecho $argv

interact {
 \177        {send "\008"}
 "\033\[3~"  {send "\177"}
}
</code>
</pre>

If you press [&lt;---], expect will receive \177 (equivalent to
0x7F and ^?, see the <a href="keyboard.html#vt220">VT220 table</a>)
and it will send \008 (equivalent to ^H) along to telnet, which
will result in [&lt;---] at the other end. Make it executable and
use <code>kbdfix telnet brokenhost</code>. Thanks to Philip Hands
for this clever workaround. 

<p>The logical next step is to automate the trick. Create a file,
<code>/etc/broken-backspace-hosts</code> (or a shorter name...). In
this file, list the hosts which expect ^H and ^? instead of ^? and
^[[3~. Now you can make a wrapper for telnet as shown below. This
particular script assumes that the telnet binary has been renamed
telnet.orig, and that the kbdfix script described in the previous
section is somewhere in your path):</p>

<pre>
<code>#!/bin/sh
if grep -wq "$@" /etc/broken-backspace-hosts ; then
 exec kbdfix telnet.orig "$@"
else
 exec telnet.orig "$@"
fi
</code>
</pre>

From now on, when you use telnet, the script will check whether the
host you are telnetting to is considered broken (listed in the
/etc/broken-backspace-hosts file). If it is, the expect script
(kbdfix) will be used, if not, telnet will be started directly. You
can do the same for rlogin, although rlogin can't be moved (i.e.
won't work when it isn't called rlogin). 

<hr>
<div class="c3">
<h2><a name="ref">References</a></h2>
</div>

<ul>
<li><a href= 
"http://electron.phys.dal.ca/Keyboard-and-Console-HOWTO.html">The
Linux <B style="color:black;background-color:#ffff66">Keyboard</B> and Console HOWTO</a></li>

<li><a href= 
"http://dv.go.dlr.de/linux/src/slackware/docs/mini/Key-Setup">Linux
<B style="color:black;background-color:#ffff66">Keyboard</B> Setup Mini-Howto</a></li>

<li>Consistent <B style="color:black;background-color:#ffff66">Keyboard</B> Configuration' article (<a href= 
"http://www.ssc.com/lj/">LJ</a> issue #38, June 97) 
<!--<LI><A href="http://www.vlsivie.tuwien.ac.at/mike/i18n.html">i18n
FAQ</A>--></li>

<li><a href="Danish-HOWTO.gz"><code>Danish-HOWTO</code></a></li>

<li><code><a href="http://www.cnr.berkeley.edu/~casterln/tcsh">Tcsh
documentation</a></code></li>

<li><a href="http://electron.et.tudelft.nl/~jdegoede/fixkeys.txt">
Fixkeys Mini Howto</a></li>

<li><a href= 
"http://www.physik.fu-berlin.de/edv_docu/documentation/bash-1.14.7/features_toc.html">
<code>Bash</code> documentation</a> <!--<LI><A
href="http://fatman.mathematik.tu-muenchen.de/~schwarz/debian-kbd/man/xmodmap.1x.html"><CODE>'man xmodmap'</CODE></A>
<LI><A
href="http://fatman.mathematik.tu-muenchen.de/~schwarz/debian-kbd/man/showkey.1.html">
<CODE>'man showkey'</CODE></A>--></li>

<li><a href="X.html"><code>'man X'</code></a></li>

<li><a href="XF86Config.man.html"><code>'man
XF86Config'</code></a></li>

<li><a href="lesskey.html"><code>'man lesskey'</code></a></li>

<li><a href="joe.html"><code>'man joe'</code></a> 
<!--<LI><A href="http://www.infodoor.com/~andrew">Andrew's
(barebones) Guide to terminals and keymapping</A>--></li>

<li><a href="http://Web.FdN.FR/~tquinot/dead-keys.en.html">Dead
keys under X11</a></li>
</ul>

<hr>
<p> This document was put together by <a href= 
"mailto:anne@ibbnet.org">Anne Baretta</a> <i>(anne@ibbnet.org)</i>.
Please mail me if you find mistakes, tY-pO's, alternative or plain
better solutions. A few people have already pointed out many
mistakes (there simply cannot be that many left...), which improved
the document a lot. 

<!-- BTW, part of the blame for this
document should go to the people at <i>nl.comp.os.linux</i>. Big
thanks to Liviu Daia, Aaron Denney, Dick Streefland, Glynn
Clements, the Debian guys at debian-i18n@lists.debian.org, Ulrich
Schmid, and many more.

-->

I would like to thank all the people who contributed to the page, and Thomas Telkamp for hosting the site. 
</p>

<div class="c3"><a href= 
"http://www.nedstat.nl/cgi-bin/viewstat?name=keyboardtel"><img src= 
"http://www.nedstat.nl/cgi-bin/nedstat.gif?name=keyboardtel"
border="0" alt="page statistics" width="16" height="16"></a></div>

<div class="c3">
<address class="c5">This page is maintained by Anne Baretta (<a
href="mailto:Anne@ibbnet.org">anne@ibbnet.org</a>). 

<script language="LiveScript">

<!---//hide script from old browsers
    document.write( "<br>Last updated "+ document.lastModified );
//end hiding contents --->

</script>
</address>
</div>
</body>
</html>

